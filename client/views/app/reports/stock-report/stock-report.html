<template name="stockReport">
  {{> pageHeading title="Stock Reports" category="Stock" name="stocktake"}}
  <div class="wrapper wrapper-content animated stock-report">
    <div class="row">
      <div class="col-lg-12">
        {{> stocktakeIntervalSelect stocktakeIntervalSelectParams}}
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="ibox">
          <div class="ibox-content">
            <div class="table-responsive">
              <table class="table table-condensed table-hover table-striped">
                <thead>
                <tr>
                  <th>Date</th>
                  <th>Total</th>
                  <th title="Total $ of orders received">Orders</th>
                  <th>Total</th>
                  <th>Date</th>
                  <th colspan="2" class="text-center expected-bg">Expected <abbr title="Cost of Goods">COG</abbr></th>
                  <th colspan="2" class="text-center actual-bg">Actual <abbr title="Cost of Goods">COG</abbr></th>
                  <th colspan="2" class="text-center">Difference</th>
                </tr>
                </thead>
                <tbody>
                {{#if reports}}
                  <tr>
                    <td><strong>{{formatDate reports.firstStocktake.date 'DD/MM/YY'}}</strong></td>
                    <td class="stocktake-total" data-type="firstStocktake"> $ {{reports.firstStocktake.total}} <i class="fa fa-caret-down" aria-hidden="true"></i></td>
                    <td> $ {{reports.totalOrdersReceived}}</td>
                    <td class="stocktake-total" data-type="secondStocktake"> $ {{reports.secondStocktake.total}} <i class="fa fa-caret-down" aria-hidden="true"></i></td>
                    <td><strong>{{formatDate reports.secondStocktake.date 'DD/MM/YY'}}</strong></td>
                    <td class="text-center expected-bg">$ {{reports.costOfGoods.expected.amount}}</td>
                    <td class="text-center expected-bg">{{reports.costOfGoods.expected.ratio}} %</td>
                    <td class="text-center actual-bg">$ {{reports.costOfGoods.actual.amount}}</td>
                    <td class="text-center actual-bg">{{reports.costOfGoods.actual.ratio}} %</td>
                    <td class="text-center difference-text">$ {{reports.difference.amount}}  <i class="fa fa-caret-right" aria-hidden="true"></i></td>
                    <td class="text-center difference-text">{{reports.difference.ratio}} % <i class="fa fa-caret-right" aria-hidden="true"></i></td>
                  </tr>
                {{/if}}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{#if detailedReportParams}}
      {{> totalValueDetails params=detailedReportParams}}
    {{/if}}
  </div>
</template>