<template name="ingredientItemEditor">
  <div class="modal fade ingredient-item-editor" tabindex="-1" role="dialog" aria-labelledby="ingredientItemEditor"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close close-modal-button">
            <span aria-hidden="true">&times;</span>
            <span class="sr-only">Close</span>
          </button>
          <h4 class="modal-title text-left" id="ingredientItemEditor">
            {{#if ingredient}}
              {{#if canEditStock}} Edit {{/if}}
            {{else}}
              Add
            {{/if}}
            Stocks
          </h4>
        </div>
        <div class="modal-body">
          <form class="form-horizontal submit-ingredient-form">
            <div class="form-group">
              <label class="col-sm-4 control-label">Supplier's Code</label>

              {{#if canEditStock}}
              {{else}}
                <div class="form-control">{{ingredient.code}}</div>
              {{/if}}

              <div class="col-sm-6 ">
                {{#if canEditStock}}
                  <input type="text" name="code" class="form-control" placeholder="Add Code"
                         value="{{ingredient.code}}">
                {{else}}
                  <div class="form-control">{{ingredient.code}}</div>
                {{/if}}
              </div>
            </div>

            <div class="form-group">
              <label class="col-sm-4 control-label">Name</label>

              <div class="col-sm-6 ">
                {{#if canEditStock}}
                  <input type="text" name="name" class="form-control" placeholder="Add Name"
                         value="{{ingredient.description}}">
                {{else}}
                  <div class="form-control">{{ingredient.description}}</div>
                {{/if}}
              </div>
            </div>

            <div class="form-group">
              <label class="col-sm-4 control-label">Supplier</label>

              <div class="col-sm-6 ">
                {{#if canEditStock}}
                  <select name="supplier" class="form-control">
                    {{#each supplierOptions}}
                      <option {{suppliersOptionAttrs}}>{{name}}</option>
                    {{/each}}
                  </select>
                {{else}}
                  <div class="form-control">
                    {{#if ingredient.suppliers}}
                      {{supplierName ingredient.suppliers}}
                    {{else}}
                      Not assigned
                    {{/if}}
                  </div>
                {{/if}}
              </div>
            </div>

            <div class="form-group">
              <label class="col-sm-4 control-label">
                Unit Ordered
                <i class="fa fa-question-circle pull-right unit-ordered-popover btn-link" data-toggle="popover"
                   data-placement="top" data-trigger="focus" tabindex="0" role="button"></i>
              </label>

              <div class="col-sm-6">
                {{#if canEditStock}}
                  <input type="text" name="unitOrdered" class="form-control" placeholder="Type a unit"
                         value="{{ingredient.portionOrdered}}"/>
                {{else}}
                  <div class="form-control">{{defaultValue ingredient.portionOrdered '-'}}</div>
                {{/if}}
              </div>
            </div>

            <div class="form-group">
              <label class="col-sm-4 control-label">How much does each {{unitsCaptions.ordered}} cost?</label>

              <div class="col-sm-6">
                {{#if canEditStock}}
                  <div class="input-group">
                    <span class="input-group-addon">$</span>
                    <input type="text" name="costPerPortion" class="form-control"
                           placeholder="How much does each {{unitsCaptions.ordered}} cost?"
                           value="{{ingredient.costPerPortion}}">
                  </div>
                {{else}}
                  <div class="form-control">${{ingredient.costPerPortion}}</div>
                {{/if}}
              </div>
            </div>

            <div class="form-group">
              <label class="col-sm-4 control-label">
                Unit Used
                <i class="fa fa-question-circle pull-right btn-link unit-used-popover" data-toggle="popover"
                   data-placement="top" data-trigger="focus" tabindex="0" role="button"></i>
              </label>

              <div class="col-sm-6 ">
                {{#if canEditStock}}
                  <input type="text" name="unitUsed" placeholder="Type a unit" class="form-control"
                         value="{{ingredient.portionUsed}}"/>
                {{else}}
                  <div class="form-control">{{defaultValue ingredient.portionUsed '-'}}</div>
                {{/if}}
              </div>
            </div>

            <div class="form-group">
              <label class="col-sm-4 control-label">
                How many {{unitsCaptions.used}} are there in a {{unitsCaptions.ordered}}?
                <i class="fa fa-question-circle pull-right btn-link unit-size-popover" data-toggle="popover"
                   data-placement="top" data-trigger="focus" tabindex="0" role="button"></i>
              </label>

              <div class="col-sm-6">
                {{#if canEditStock}}
                  <input type="text" name="unitSize" class="form-control" placeholder="Unit Size"
                         value="{{ingredient.unitSize}}">
                {{else}}
                  <div class="form-control">{{ingredient.unitSize}}</div>
                {{/if}}
              </div>
            </div>

            {{> ingredientEditorRelatedJobs ingredient}}

            <button type="submit" class="hide submit-form-button">save</button>
          </form>
        </div>
        <div class="modal-footer">
          {{#if ingredient}} <!-- is edit mode -->
            <button type="button" class="btn btn-primary submit-ingredient-button">Save changes</button>

            {{#if isArchive}}
              <button type="button" class="btn btn-warning restore-button">Restore</button>
              <button type="button" class="btn btn-danger delete-button">Delete</button>
            {{else}}
              <button type="button" class="btn btn-warning archive-button">Archive</button>
            {{/if}}
          {{else}} <!-- create mode -->
            <button class="btn btn-primary submit-ingredient-button">Add ingredient</button>
          {{/if}}

          <button type="button" class="btn btn-default close-modal-button">Close</button>
        </div>
      </div>
    </div>
  </div>
</template>