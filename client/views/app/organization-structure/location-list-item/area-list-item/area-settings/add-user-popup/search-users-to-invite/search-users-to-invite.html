<template name="searchUsersToInvite">
  {{#if isInviteInProgress}}
    <div class="text-center invite-progress-wrapper">
      <i class="fa fa-spinner fa-pulse fa-3x fa-fw margin-bottom"></i>
    </div>
  {{else}}
    <div class="add-user-to-area">
      {{#if selectedUser}}
        {{> searchUserInfo user=selectedUser removeUser=true onUserSelect=unselectUser}}
        {{> userRolesSelect}}
      {{else}}
        <input type="text"
               class="form-control input-field user-search-input"
               placeholder="e.g. john@gmail.com"
               name="addUserName"
               required="required">
        {{#if selectedEmail}}
          <input type="text"
                 class="form-control input-field user-name-input"
                 placeholder="Name"
                 required="required"
                 pattern=".{3,}"
                 title="Minimum name length: 3">
          {{> userRolesSelect}}
        {{/if}}
      {{/if}}
      {{#if isReadyToInviteUser}}
        <button class="btn btn-primary col-xs-12 invite-user-button">
          <i class="fa fa-check"></i>
        </button>
      {{/if}}
    </div>
    <div>
      {{#unless isReadyToInviteUser}}
        {{#if searchText}}
          {{#if searchedUsers}}
            <div class="search-results">
              <b>Select to add</b>
              <hr/>
              <div class="search-users-container">
                {{# each searchedUsers}}
                  {{> searchUserInfo user=this onUserSelect=selectUser}}
                {{/each}}
              </div>
            </div>
          {{else}}
            <div class="text-muted text-center no-results">
              <b>No results</b>
            </div>
          {{/if}}
        {{/if}}
      {{/unless}}
    </div>
  {{/if}}
</template>