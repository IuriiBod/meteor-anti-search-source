<template name="ordersList">
  <div class="col-lg-12">
    <div class="ibox ">
      <div class="ibox-content">
        {{#if isNotEmpty}}
          {{> supplierFilter onSupplierChanged=onSupplierChanged orderId=this.orderId}}
          <table class="table table-condensed table-hover table-striped">
            <thead>
            <tr>
              <th>Stock item</th>
              <th>On hand</th>
              <th>Needed</th>
              <th>To order</th>
              {{#if supplier}}
              {{else}}
                <th>Action</th>
              {{/if}}
            </tr>
            </thead>
            <tbody>
            {{#each list}}
              {{> ordersListItem itemId=this._id onCountChange=onCountChange}}
            {{/each}}
            </tbody>
          </table>

          <hr>
          {{#if orderNote}}
            <div><p class="text-danger pull-left">Note: &nbsp;</p>{{orderNote}}</div>
          {{else}}
            <textarea name="supplierOrderNote" id="supplierOrderNote" class="form-control message-input-post"
                      placeholder="Add notes here and press enter to submit"></textarea>
          {{/if}}
        {{else}}
          <h4>You haven't created any orders.</h4> <br>
          <a href="#" class="gotoStocktake">Click here</a> to go to the stocktake and create orders.
        {{/if}}

      </div>
    </div>
  </div>

  <!--TODO: NEEDS TO CHANGE TO TEMPLATE CALL WHEN STOCK FLOW COMPONENTS WILL BE DESTROYED-->
  {{> render component='commentsPanel' id=this.orderId type='stockOrders'}}

  <!-- COMPOSE MAIL MODAL-->
    {{> composeMail name="composeMail" initialHtml=initialHtml supplier=supplier}}
  <!-- /COMPOSE MAIL MODAL -->
</template>