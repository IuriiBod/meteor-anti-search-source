<template name="stocktakeOrdering">
  <!-- Page heading -->
  {{> pageHeading title='Stocktake Ordering' category="Stocktake List"}}

  <div class="wrapper wrapper-content">
    <div class="row">
      <div class="col-lg-12">
        <div class="ibox ">
          <div class="ibox-content">
            {{#if isNotEmpty}}
              {{> supplierFilter onSupplierChanged=onSupplierChanged stocktakeMainId=stocktakeMainId}}
              <hr>
              {{> orderingStatus activeSupplierId=state$activeSupplierId stocktakeMainId=stocktakeMainId}}
              <hr>
              <table class="table table-condensed table-hover table-striped">
                <thead>
                <tr>
                  <th>Stock item</th>
                  <th>On hand</th>
                  <th>Needed</th>
                  <th>To order</th>
                  {{#unless state$activeSupplierId}}
                    <th>Action</th>
                  {{/unless}}
                </tr>
                </thead>
                <tbody>
                {{#each stockOrdersList state$activeSupplierId}}
                  {{> stockOrderItem}}
                {{/each}}
                </tbody>
              </table>

              <hr>
              {{#if orderNote state$activeSupplierId}}
                <div>
                  <p class="text-danger pull-left">Note: &nbsp;</p>
                  {{orderNote state$activeSupplierId}}
                </div>
              {{else}}
                <textarea class="form-control message-input-post supplier-order-note"
                          placeholder="Add notes here and press enter to submit"></textarea>
              {{/if}}
            {{else}}
              <h4>You haven't created any orders.</h4>
              <a href="{{pathFor route="stocktakeCounting" _id=stocktakeMainId}}">Click here</a> to go to the stocktake
              and create orders.
            {{/if}}

          </div>
        </div>
      </div>

      {{> commentsPanel id=stocktakeMainId type='stockOrders'}}
    </div>
  </div>
</template>