<template name="stockCounting">
  <div class="row">
    <div class="col-lg-12">
      {{#if notTemplate}}
        <a class="btn btn-primary btn-sm pull-right" href="/stocktake/orders/{{stockTakeCountingContext.stockTakeId}}">View Orders<br></a>
      {{else}}
        <a class="btn btn-primary btn-sm pull-right generateOrders">Save stocktake &amp; generate orders<br></a>
        {{#if stockTakeCountingContext.editableStockTake}}
          <a class="btn btn-link btn-sm pull-right saveStockTake"><i class="fa fa-fw fa-save"></i>Save</a>
        {{else}}
          <a class="btn btn-link btn-sm pull-right editStockTake"><i class="fa fa-fw fa-edit"></i>Edit Stocktake
            Template</a>
        {{/if}}
      {{/if}}
      {{dateFormat stocktakeMain.stocktakeDate}}
      <hr>
    </div>
  </div>
  
  <div class="row">
    {{> areaFilters stockTakeData=stockTakeCountingContext}}
    {{#if filtered}}
      <div class="col-md-8">
        {{#if notTemplate}}
          <ul class="list-group sortableStockItems">
            {{#each stocktakeList}}
              {{> stockCountingListItem item=this stockTakeData=stockTakeCountingContext}}
            {{else}}
              No items on this list
            {{/each}}
          </ul>
        {{else}}
          <ul class="list-group sortableStockItems">
            {{#each ingredientsList}}
              {{> stockCountingListItem item=this stockTakeData=stockTakeCountingContext}}
            {{else}}
              No items on this list
            {{/each}}
          </ul>
        {{/if}}
        
        {{#if stockTakeCountingContext.editableStockTake}}
          <a class="btn btn-block btn-default btn-outline addStock">Add stock items to this area<br></a>
        {{/if}}
      </div>
    {{else}}
      Select areas to show list of stock items
    {{/if}}
  </div>

  <!-- STOCKS MODAL LIST-->
  {{#if stockTakeCountingContext.activeSpecialArea}}
  <div class="modal fade" id="stocksListModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
       aria-hidden="true">
    {{> stocksModalList name="stockModal" modalStockListParams=modalStockListParams}}
  </div>
  {{/if}}
  <!-- /STOCKS MODAL LIST -->

  <!-- ADD GENERAL AREA MODAL LIST-->
  <div class="modal fade" id="addNewGeneralAreaModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
       aria-hidden="true">
    {{> newAreaModal name="general"}}
  </div>
  <!-- /ADD GENERAL AREA MODAL LIST-->

  <!-- ADD SPECIAL AREA MODAL LIST-->
  <div class="modal fade" id="addNewSpecialAreaModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
       aria-hidden="true">
    {{> newAreaModal name="special" generalArea=stockTakeCountingContext.activeGeneralArea}}
  </div>
  <!-- /ADD SPECIAL AREA MODAL LIST-->
</template>