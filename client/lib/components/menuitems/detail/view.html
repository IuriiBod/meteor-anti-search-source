<template name="menuItemDetail">
  <!-- Page heading -->
  {{> render component="pageHeading" title=state$menu.name category='Menus' name="menudetailed" id=state$menu._id}}

  <div class="wrapper wrapper-content animated">
    <div class="row">
      <div class="col-lg-12">
        <div class="row">
          
          <div class="col-lg-4 col-xs-12 pull-right">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Settings</h3>
              </div>
              <div class="panel-body editorPanel">
                {{> render component="editMenuItem"}}
              </div>
            </div>
          </div>
          
          <div class="col-lg-8 col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Instructions</h3>
              </div>
              <div class="panel-body editorPanel">
                <p>{{{state$menu.instructions}}}<br></p>
              </div>
              <div class="panel-body editor hide">
                {{> render component="textEditor" id='menuItemEditorDetail'
              initialHtml=state$initialHTML}}
              </div>
              {{#if state$isPermitted}}
              <div class="panel-footer textEdit">Click here to edit</div>
              {{/if}}
            </div>
          </div>
        </div>
        <hr>
        <h1>Ingredients</h1>
        <p>Add the prep jobs and stock items that are used in this recipe.</p>
        <table class="table table-striped">
          <thead>
            <tr>
              {{#if state$isPermitted}}
              <th></th>
              {{/if}}
              <th>Name</th>
              <th>Type</th>
              <th>Quantity</th>
              <th>Measure</th>
              {{#if state$isPermitted}}
              <th></th>
              {{/if}}
            </tr>
          </thead>
          <tbody>
            {{#each state$menu.jobItems}}
              {{> render component="ingsAndPreps" item=this type="prep"}}
            {{/each}}
            {{#each state$menu.ingredients}}
              {{> render component="ingsAndPreps" item=this type="ings"}}
            {{/each}}
          </tbody>
        </table>
        {{#if state$isPermitted}}
        <a class="btn btn-primary" href="#showListOfIngs" data-toggle="modal">Add prep or stock</a>
        {{/if}}
      </div>
      {{> render component='menuDetailWidgets' item=state$menu}}
      {{> render component='commentsPanel' id=state$menu._id type='menu'}}
    </div>
  </div>
</template>