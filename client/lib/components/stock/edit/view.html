<template name="editIngredientItem">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">{{#if state$isManagerOrAdmin}} Edit {{/if}} Stocks</h4>
      </div>
      <form class="form-horizontal" role="form" data-id="{{state$id}}">
        <div class="modal-body">
          <div class="form-group">
            <label class="col-sm-4 control-label">Supplier's Code</label>
            <div class="col-sm-6 ">
              {{#if state$isManagerOrAdmin}}
              <input type="text" name="code" class="form-control" placeholder="Add Name" value="{{item.code}}">
              {{else}}
              <div class="form-control">{{item.code}}</div>
              {{/if}}
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-4 control-label">Description</label>
            <div class="col-sm-6 ">
              {{#if state$isManagerOrAdmin}}
              <input type="text" name="desc" class="form-control" placeholder="Add Name" value="{{item.description}}">
              {{else}}
              <div class="form-control">{{item.description}}</div>
              {{/if}}
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-4 control-label">Supplier</label>
            <div class="col-sm-6 ">
              {{#if state$isManagerOrAdmin}}
              <select name="supplier" class="form-control">
                <option value="{{item.suppliers}}">{{SupplierName item.suppliers}}</option>
                {{#each state$suppliers}}
                <option value="{{_id}}">{{name}}</option>
                {{/each}}
              </select>
              {{else}}
              <div class="form-control">{{item.suppliers}}</div>
              {{/if}}
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-4 control-label">Portion Ordered (b)</label>
            <div class="col-sm-6">
              {{#if state$isManagerOrAdmin}}
              <input type="text" name="portionOrdered" class="form-control" placeholder="Add unit ordered" value="{{item.portionOrdered}}">
              {{else}}
              <div class="form-control">{{item.portionOrdered}}</div>
              {{/if}}
              <!-- <select name="unitOrdered" class="form-control">
                <option selected="selected">packets</option>
                <option>boxes</option>
                <option>bottles</option>
                <option>etc...</option>
              </select> -->
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-4 control-label">Cost per Portion (b)</label>
            <div class="col-sm-6">
              <div class="input-group">
                <span class="input-group-addon">$</span>
                {{#if state$isManagerOrAdmin}}
                <input type="text" name="costPerPortion" class="form-control" placeholder="Cost of a unit" value="{{item.costPerPortion}}">
                {{else}}
                <div class="form-control">{{item.costPerPortion}}</div>
                {{/if}}
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-4 control-label">Portion Used</label>
            <div class="col-sm-6 ">
              {{#if state$isManagerOrAdmin}}
              <input type="text" name="portionUsed" class="form-control" placeholder="Portion used" value="{{item.portionUsed}}">
              {{else}}
              <div class="form-control">{{item.portionUsed}}</div>
              {{/if}}
              <!-- <select name="portionUsed" class="form-control">
                <option>kg (kilo grams)</option>
                <option selected="selected">g (grams)</option>
                <option>mg (mili grams)</option>
                <option>ml (mili liters)</option>
                <option>l (liters)</option>
              </select> -->
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-4 control-label">How many (a)'s in a (b)</label>
            <div class="col-sm-6">
              {{#if state$isManagerOrAdmin}}
              <input type="text" name="unitSize" class="form-control" placeholder="Unit Size" value="{{item.unitSize}}">
              {{else}}
              <div class="form-control">{{item.unitSize}}</div>
              {{/if}}
            </div>
          </div>

          {{# if state$relatedJobs}}
            <div class="form-group">
              <label class="col-sm-12 text-center">
                Related jobs
              </label>
              <div class="col-sm-12">
                <table class="table">
                  <thead>
                    <tr>
                      <th>
                        Name
                      </th>
                      <th>
                        Active Time (mins)
                      </th>
                      <th>
                        Portions
                      </th>
                      <th>
                        Self Life
                      </th>
                    </tr>
                  </thead>
                  {{# each state$relatedJobs}}
                    <tbody>
                      <tr>
                        <td>
                          <a href="{{pathFor 'jobItemDetailed' _id=_id}}" target="_blank">
                            {{name}}
                          </a>
                        </td>
                        <td>
                          {{state$convertTime activeTime}}
                        </td>
                        <td>
                          {{portions}}
                        </td>
                        <td>
                          {{shelfLife}}
                        </td>
                      </tr>
                    </tbody>
                  {{/ each}}
                </table>
              </div>
            </div>
          {{/ if}}

        </div>
        <div class="modal-footer">
          {{#if state$isManagerOrAdmin}}
          <button type="button" class="btn btn-danger deleteIngredient" data-id="{{item._id}}">Delete</button>
          {{/if}}
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          {{#if state$isManagerOrAdmin}}
          <button type="submit" class="btn btn-primary">Save changes</button>
          {{/if}}
        </div>
      </form>
    </div>
  </div>
</template>
